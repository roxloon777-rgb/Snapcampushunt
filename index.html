<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AR Treasure Hunt Map - Marker</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; font-family: sans-serif; overflow: hidden;
    }

    /* Start overlay */
    #startScreen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000000cc; display: flex; justify-content: center; align-items: center;
      flex-direction: column; z-index: 1000; text-align: center; color: white; padding: 20px;
    }
    #startScreen h1 { font-size: 1.8em; margin-bottom: 20px; }
    #startScreen button {
      padding: 15px 30px; font-size: 18px; border: none; border-radius: 8px;
      background: #007bff; color: white; cursor: pointer;
    }
    #startScreen button:hover { background: #0056b3; }

    /* Map container */
    #mapContainer { width: 100%; height: 100vh; position: relative; overflow: hidden; }
    #mapImage { width: 100%; height: 100%; object-fit: cover; }

    /* Hotspots */
    .hotspot {
      position: absolute; 
      background: rgba(109, 62, 146, 0.8); color: white;
      padding: 6px 10px; border-radius: 5px; cursor: pointer; font-weight: bold;
      transform: translate(-50%, -50%); white-space: nowrap;
    }
    .collected { background: rgba(0,200,0,0.8); }
  </style>
</head>
<body>

<!-- Start overlay -->
<div id="startScreen">
  <h1>Padlet Scavenger Hunt: Through Our Campus Lens<br>
  Your mission: explore, capture, and share the spirit of our campus through three special locations!</h1>
  <button id="startButton">Start</button>
</div>

<div id="mapContainer">
  <img id="mapImage" src="assets/Map2.png" alt="Map">

  <div class="hotspot" id="law">Calvyn Fountain</div>
  <div class="hotspot" id="lovers">Lover's Lane</div>
  <div class="hotspot" id="tree">Acacia Tree</div>
</div>

<script>
const MAP_WIDTH = 3508;   // Original map width in pixels
const MAP_HEIGHT = 2481;  // Original map height in pixels

const gpsHotspots = [
  {id:'law', lat:-26.688737, lon:27.091276, x:1384, y:708},
  {id:'lovers', lat:-26.688676, lon:27.092549, x:1888, y:858},
  {id:'tree', lat:-26.688878, lon:27.092565, x:1202, y:1545}
];

// Load collected status
const collected = JSON.parse(localStorage.getItem('collected') || '{}');

// Position hotspots relative to map container
function positionHotspots() {
  const container = document.getElementById('mapContainer');
  const rect = container.getBoundingClientRect();
  const scaleX = rect.width / MAP_WIDTH;
  const scaleY = rect.height / MAP_HEIGHT;

  gpsHotspots.forEach(h => {
    const el = document.getElementById(h.id);
    const left = h.x * scaleX;
    const top = h.y * scaleY;

    el.style.left = `${left}px`;
    el.style.top = `${top}px`;

    if(collected[h.id]) el.classList.add('collected');

    // Fixed hotspot link: open existing ar.html with id
    el.onclick = () => {
      window.location.href = `ar.html?id=${h.id}`;
    };
  });
}

window.addEventListener('resize', positionHotspots);
window.onload = positionHotspots;

// Start overlay
document.getElementById('startButton').addEventListener('click', () => {
  document.getElementById('startScreen').style.display = 'none';
});
</script>

</body>
</html>

